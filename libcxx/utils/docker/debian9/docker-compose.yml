version: '3.7'
services:
  llvm-builder-base:
    build:
      context: .
      dockerfile: llvm-builder-base.Dockerfile
      target: llvm-builder-base
    image: ericwf/llvm-builder-base:latest
  llvm-buildbot-worker:
    build:
      context: .
      dockerfile: llvm-buildbot-worker.Dockerfile
      target: llvm-buildbot-worker
    image: ericwf/llvm-buildbot-worker:latest
  llvm-github-actions-worker:
    build:
      context: .
      dockerfile: llvm-github-actions-worker.Dockerfile
      target: llvm-github-actions-worker
    image: ericwf/llvm-github-actions-worker:latest
    configs:
      - github_runner_token
    secrets:
      - github_token
configs:
  github_runner_token:
    file: ./secrets/github-token.txt
secrets:
  github_token:
    file: ./secrets/github-token.txt
